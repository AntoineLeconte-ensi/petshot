CREATE SEQUENCE account_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE atm_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE card_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE customer_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE operations_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE SEQUENCE storekeeper_account_id_seq INCREMENT BY 1 MINVALUE 1 START 1;
CREATE TABLE account (id INT NOT NULL, customer_id INT DEFAULT NULL, account_number INT NOT NULL, balance INT NOT NULL, type INT NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_7D3656A49395C3F3 ON account (customer_id);
CREATE TABLE atm (id INT NOT NULL, account_number INT NOT NULL, address VARCHAR(100) NOT NULL, post_code INT NOT NULL, city VARCHAR(50) NOT NULL, PRIMARY KEY(id));
CREATE TABLE card (id INT NOT NULL, number INT NOT NULL, account INT NOT NULL, type VARCHAR(100) NOT NULL, order_date DATE NOT NULL, production_date DATE NOT NULL, end_validity_date DATE NOT NULL, PRIMARY KEY(id));
CREATE TABLE customer (id INT NOT NULL, civility VARCHAR(5) NOT NULL, name VARCHAR(20) NOT NULL, surname VARCHAR(20) NOT NULL, address VARCHAR(255) NOT NULL, postcode INT NOT NULL, city VARCHAR(30) NOT NULL, PRIMARY KEY(id));
CREATE TABLE operations (id INT NOT NULL, card_id INT DEFAULT NULL, atm_id INT DEFAULT NULL, account_id INT DEFAULT NULL, number INT NOT NULL, type INT NOT NULL, amount INT NOT NULL, date TIMESTAMP(0) WITHOUT TIME ZONE NOT NULL, PRIMARY KEY(id));
CREATE INDEX IDX_281453484ACC9A20 ON operations (card_id);
CREATE INDEX IDX_281453482E7408AF ON operations (atm_id);
CREATE INDEX IDX_281453489B6B5FBA ON operations (account_id);
CREATE TABLE storekeeper_account (id INT NOT NULL, account_number INT NOT NULL, PRIMARY KEY(id));
ALTER TABLE account ADD CONSTRAINT FK_7D3656A49395C3F3 FOREIGN KEY (customer_id) REFERENCES customer (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE operations ADD CONSTRAINT FK_281453484ACC9A20 FOREIGN KEY (card_id) REFERENCES card (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE operations ADD CONSTRAINT FK_281453482E7408AF FOREIGN KEY (atm_id) REFERENCES atm (id) NOT DEFERRABLE INITIALLY IMMEDIATE;
ALTER TABLE operations ADD CONSTRAINT FK_281453489B6B5FBA FOREIGN KEY (account_id) REFERENCES account (id) NOT DEFERRABLE INITIALLY IMMEDIATE;